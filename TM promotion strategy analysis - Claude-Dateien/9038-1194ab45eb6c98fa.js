"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9038],{6551:(e,t,s)=>{s.d(t,{k:()=>a});var l=s(54568);s(7620);var n=s(41646),i=s(39383);let a=e=>{let{isDetailedView:t,directoryServer:s,handleAddRemoteServer:a,handleRemoveRemoteServer:r,handleConnectRemoteServer:o,handleDisconnectRemoteServer:d}=e,{getCorrespondingInstalledServer:c}=(0,i.Y5)(),u="remote"===s.type?c(s):null,m=!!u,x=!!(null==u?void 0:u.isConnected),p=!!u&&x&&!u.usedAuthentication;return(0,l.jsx)(n.i,{handleAdd:()=>a(s.uuid),handleRemove:()=>r(s.uuid),handleConnect:()=>o(s.uuid),handleDisconnect:()=>d(s.uuid),isInstalled:m,isConnected:x,isDetailedView:t,connectedByDefault:p})}},8177:(e,t,s)=>{s.d(t,{O:()=>i,U:()=>a});var l=s(7620),n=s(21883);let i=()=>{let e=(0,l.useContext)(n.O);if(!e)throw Error("useExtensions must be used within ExtensionsProvider");return e},a=()=>{let{extensions:e,setExtensionSettings:t}=i();return async s=>{let l=e.find(e=>e.id===s);if(!l)return;let n=l.settings||{};await t(s,{...n,isEnabled:!n.isEnabled})}}},15200:(e,t,s)=>{s.d(t,{N:()=>a});var l=s(54568),n=s(92245),i=s(41646);let a=e=>{let{isDetailedView:t,directoryServer:s,handleAddFirstPartyServer:a,handleRemoveFirstPartyServer:r,handleConnectFirstPartyServer:o,handleDisconnectFirstPartyServer:d}=e,{syncSourceType:c}=s,{enabledForOrg:u,connected:m}=(0,n.Ou)()[c]||{};return(0,l.jsx)(i.i,{handleAdd:()=>a(c),handleRemove:()=>r(c),handleConnect:()=>o(c),handleDisconnect:()=>d(c),isInstalled:u,isConnected:m,isDetailedView:t,connectedByDefault:!1})}},19276:(e,t,s)=>{s.d(t,{X:()=>c});var l=s(54568),n=s(35984),i=s(23812),a=s(53592),r=s(7620),o=s(10369),d=s(59666);let c=e=>{let{extension:t,size:s="normal",style:c}=e,u=(0,o.A)(),{addError:m}=(0,n.Y)(),[x,p]=(0,r.useState)(null),[f,g]=(0,r.useState)(!0),[h,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{if(!t.id)return g(!1);try{var e;let s=await (null===a.Fd||void 0===a.Fd||null==(e=a.Fd.getIsUpdateAvailable)?void 0:e.call(a.Fd,t.id,t.manifest))||null;p(s)}catch(e){m((0,l.jsx)(d.A,{defaultMessage:"Failed to check for extension updates",id:"qmTCOIrDRY",description:"Error message when checking for extension updates fails"}),{error:e})}finally{g(!1)}})()},[t,m]);let j=async()=>{if(t.id&&x){v(!0);try{var e;await (null===a.Fd||void 0===a.Fd||null==(e=a.Fd.installDxtFromDirectory)?void 0:e.call(a.Fd,t.id,x))}catch(e){m((0,l.jsx)(d.A,{defaultMessage:"Failed to update extension",id:"II6Ozv49Lo",description:"Error message when extension update fails"}),{error:e})}finally{v(!1)}}};if(f||!x)return null;let y=u.formatMessage({defaultMessage:"Update available to v{version}. You are currently on v{currentVersion}.",id:"2Fd2dxtEBo",description:"Title for extension update button"},{version:x,currentVersion:t.manifest.version});return(0,l.jsx)(i.$,{variant:"primary",disabled:h,onClick:j,title:y,style:c,children:h?u.formatMessage({defaultMessage:"Updating...",id:"yugrR4jIsZ",description:"Button text while updating extension"}):"small"===s?u.formatMessage({defaultMessage:"Update",id:"rQoNAJyEVw",description:"Button to update extension (short version)"}):u.formatMessage({defaultMessage:"Update to {version}",id:"Wur112HVmK",description:"Button to update extension to specific version"},{version:x})})}},21883:(e,t,s)=>{s.d(t,{O:()=>r,y:()=>o});var l=s(54568),n=s(53592),i=s(7620),a=s(78519);let r=(0,i.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,i.useState)([]),[d,c]=(0,i.useState)(!0),[u,m]=(0,i.useState)(!1),[x,p]=(0,i.useState)(null),[f,g]=(0,i.useState)(!0),[h,v]=(0,i.useState)(!0),j=(0,i.useCallback)(async()=>{try{var e;c(!0),p(null);let t=await (null===n.Fd||void 0===n.Fd||null==(e=n.Fd.getInstalledExtensionsWithState)?void 0:e.call(n.Fd));t&&o(t),m(!0)}catch(e){p(e instanceof Error?e.message:"Failed to load extensions")}finally{c(!1)}},[]),y=(0,i.useCallback)(async(e,t)=>{try{var s;await (null===n.Fd||void 0===n.Fd||null==(s=n.Fd.setExtensionSettings)?void 0:s.call(n.Fd,e,t)),o(s=>s.map(s=>s.id===e?{...s,settings:{...s.settings,...t}}:s))}catch(e){p(e instanceof Error?e.message:"Failed to update extension settings"),await j()}},[j]),b=(0,i.useCallback)(async e=>{try{var t;await (null===n.Fd||void 0===n.Fd||null==(t=n.Fd.deleteExtension)?void 0:t.call(n.Fd,e)),o(t=>t.filter(t=>t.id!==e))}catch(e){p(e instanceof Error?e.message:"Failed to delete extension"),await j()}},[j]);(0,i.useEffect)(()=>{var e,t,s,l;j(),null===n.Fd||void 0===n.Fd||null==(e=n.Fd.isDirectoryEnabled)||e.call(n.Fd).then(g),null===n.Fd||void 0===n.Fd||null==(t=n.Fd.isExtensionsEnabled)||t.call(n.Fd).then(v);let i=null===n.Fd||void 0===n.Fd||null==(s=n.Fd.onExtensionsChanged)?void 0:s.call(n.Fd,()=>{j()}),a=null===n.Fd||void 0===n.Fd||null==(l=n.Fd.onExtensionSettingsChanged)?void 0:l.call(n.Fd,(e,t)=>{o(s=>s.map(s=>s.id===e?{...s,settings:{...s.settings,...t}}:s))});return()=>{null==i||i(),null==a||a()}},[j]);let w=(0,i.useCallback)(e=>s.find(t=>t.id===e),[s]),C=(0,i.useMemo)(()=>({extensions:s,isLoading:d,hasLoadedOnce:u,error:x,isDirectoryEnabled:f,isExtensionsEnabled:h,setExtensionSettings:y,deleteExtension:b,refreshExtensions:j,getExtensionById:w,checkExtensionCompatibility:a.So}),[b,x,s,w,f,h,d,j,y,u]);return(0,l.jsx)(r.Provider,{value:C,children:t})}},28726:(e,t,s)=>{s.d(t,{E:()=>l});function l(){var e,t;if(!(null==(t=window.process)||null==(e=t.versions)?void 0:e.electron))return null;let s=window.process;return{type:s.type||"",arch:s.arch||"",platform:s.platform||"",versions:s.versions||{},isAppPackaged:"true"===s.isAppPackaged,version:s.version||"",isInternalBuild:"true"===s.isInternalBuild}}},41646:(e,t,s)=>{s.d(t,{i:()=>m});var l=s(54568),n=s(64328),i=s(23812),a=s(67453),r=s(17560),o=s(16),d=s(59666),c=s(50571),u=s(91877);let m=e=>{let{isDetailedView:t,handleAdd:s,handleRemove:m,handleConnect:x,handleDisconnect:p,isInstalled:f,isConnected:g,connectedByDefault:h}=e,v=(0,c.vx)(),j=(0,n.mV)();if("free"===(0,n.$b)())return t?(0,l.jsx)(i.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",href:"/upgrade?open_in_browser=1",target:"_blank",children:(0,l.jsx)(d.A,{defaultMessage:"Upgrade to connect",id:"33HAnsQE8u"})}):void 0;let y=!v&&!f;if(j&&v)if(f)return t?(0,l.jsx)(i.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",onClick:m,children:(0,l.jsx)(d.A,{defaultMessage:"Remove from your team",id:"dl4er/5ODx"})}):(0,l.jsx)(r.S,{size:16,className:"transition-opacity m-2 text-accent-secondary-100"});else return t?(0,l.jsx)(i.$,{variant:"primary",size:"sm",className:"!rounded-lg !text-sm",onClick:s,children:(0,l.jsx)(d.A,{defaultMessage:"Add to your team",id:"Bq/DQi0LBe"})}):null;if(j&&!v)if(h)return t?(0,l.jsx)(i.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",disabled:!0,children:(0,l.jsx)(d.A,{defaultMessage:"Connected by default",id:"VqhPBBbJWk"})}):(0,l.jsx)(r.S,{size:16,className:"transition-opacity m-2 text-text-500"});else if(g)return t?(0,l.jsx)(i.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",onClick:p,children:(0,l.jsx)(d.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})}):(0,l.jsx)(r.S,{size:16,className:"transition-opacity m-2 text-text-500"});else return t?(0,l.jsx)(a.Tooltip,{tooltipContent:y?(0,l.jsx)(d.A,{defaultMessage:"Ask your admin to add this for your team",id:"q273cUNkwo"}):void 0,children:(0,l.jsx)("div",{children:(0,l.jsx)(i.$,{variant:"primary",size:"sm",className:"!rounded-lg !text-sm",disabled:y,onClick:x,children:(0,l.jsx)(d.A,{defaultMessage:"Connect",id:"+vVZ/G11Zg"})})})}):(0,l.jsx)(a.Tooltip,{tooltipContent:y?(0,l.jsx)(d.A,{defaultMessage:"Ask your admin to add this for your team",id:"q273cUNkwo"}):void 0,children:(0,l.jsx)("div",{children:(0,l.jsx)(u.r,{disabled:y,onClick:x,children:(0,l.jsx)(o.c,{size:16})})})});if(!j)if(f&&g)return t?(0,l.jsx)(i.$,{variant:"secondary",size:"sm",className:"!rounded-lg !text-sm",onClick:m,children:(0,l.jsx)(d.A,{defaultMessage:"Disconnect",id:"qj1uhzynub"})}):(0,l.jsx)(r.S,{size:16,className:"transition-opacity m-2 text-text-500"});else return t?(0,l.jsx)(i.$,{variant:"primary",size:"sm",className:"!rounded-lg !text-sm",onClick:f?x:s,children:(0,l.jsx)(d.A,{defaultMessage:"Connect",id:"+vVZ/G11Zg"})}):(0,l.jsx)(u.r,{onClick:f?x:s,children:(0,l.jsx)(o.c,{size:16})})}},53592:(e,t,s)=>{var l,n,i,a,r,o,d,c;s.d(t,{Fd:()=>f,TQ:()=>p,W$:()=>h,YQ:()=>m,a8:()=>x,lX:()=>v,oO:()=>u,un:()=>g});let u=null==(l=globalThis["claude.settings"])?void 0:l.AppConfig,m=null==(n=globalThis["claude.settings"])?void 0:n.Startup,x=null==(i=globalThis["claude.settings"])?void 0:i.GlobalShortcut,p=null==(a=globalThis["claude.settings"])?void 0:a.MCP,f=null==(r=globalThis["claude.settings"])?void 0:r.Extensions,g=null==(o=globalThis["claude.settings"])?void 0:o.FilePickers,h=null==(d=globalThis["claude.settings"])?void 0:d.AppPreferences,v=null==(c=globalThis["claude.settings"])?void 0:c.AppFeatures},56657:(e,t,s)=>{s.d(t,{u:()=>H});var l=s(54568),n=s(94470),i=s(23812),a=s(66716),r=s(84617),o=s(64371),d=s(37541),c=s(28044),u=s(18868),m=s(23132),x=s(72902),p=s(7620),f=s(59666),g=s(10369),h=s(50571),v=s(45271),j=s(30574),y=s(17560),b=s(78519);let w=e=>{let{manifest:t}=e,{compatibility:s,isChecking:n}=(0,b.wH)({manifest:t}),i=(0,b.yo)(t,s);return t&&0!==i.length?(0,l.jsxs)("div",{className:"py-7 border-b-0.5 border-border-300",children:[(0,l.jsx)("h4",{className:"text-sm font-medium mb-2",children:(0,l.jsx)(f.A,{defaultMessage:"Requirements",id:"T/GrW3GRjO",description:"Extension requirements section header"})}),n?(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-text-300",children:[(0,l.jsx)(j.E,{size:16,className:"animate-spin"}),(0,l.jsx)(f.A,{defaultMessage:"Checking requirements...",id:"B3WNGMnvjq",description:"Loading state while checking extension requirements"})]}):(null==s?void 0:s.compatible)?(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm text-success-000",children:[(0,l.jsx)(y.S,{size:16,weight:"bold"}),(0,l.jsx)(f.A,{defaultMessage:"All requirements met",id:"aTEJ6YhqYE",description:"Success message when all extension requirements are satisfied"})]}):(0,l.jsx)("div",{className:"space-y-2",children:i.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center gap-2 text-sm ".concat(e.met?"text-success-000":"text-warning-600"),children:[e.met?(0,l.jsx)(y.S,{size:16,weight:"bold"}):(0,l.jsx)(u.i,{size:16,weight:"bold"}),(0,l.jsx)("span",{children:e.name})]},t))}),!(null==s?void 0:s.compatible)&&(0,l.jsx)("div",{className:"mt-3 p-3 bg-warning-50 dark:bg-warning-950 rounded-lg",children:(0,l.jsx)("p",{className:"text-sm text-warning-800 dark:text-warning-200",children:(0,l.jsx)(f.A,{defaultMessage:"This extension may not work correctly until all requirements are met.",id:"6EFoZgFJFB",description:"Warning message when extension requirements are not met"})})})]}):null};var C=s(16685);let N=e=>{let{markdown:t,className:s=""}=e;return t?(0,l.jsx)("div",{className:"".concat(s," [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-2 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-2 [&_li]:my-1 [&_p]:my-3 [&_p:first-child]:mt-0"),children:(0,l.jsx)(C.o,{className:"whitespace-pre-wrap",allowedElements:["p","br","strong","em","ul","ol","li","a","code","pre","h1","h2","h3","h4","h5","h6","blockquote"],components:{a:e=>{let{href:t,children:s}=e;if(!t||!t.startsWith("https://"))return(0,l.jsx)("span",{children:s});let n=String(s);return n===t||t.includes(n.replace(/\s/g,""))?(0,l.jsx)(r.Y,{href:t,target:"_blank",rel:"noopener noreferrer",children:s}):(0,l.jsxs)(r.Y,{href:t,target:"_blank",rel:"noopener noreferrer",children:[s," (",new URL(t).hostname,")"]})}},children:t})}):null};var F=s(8177),M=s(15200),k=s(84284),A=s(48252),E=s(53592),S=s(75495),_=s(75695),z=s(61295),D=s(27541),P=s(18456),V=s.n(P),q=s(19276),O=s(3075),T=s(90741);let B=e=>{let{isOpen:t,onClose:s,extension:n,server:i}=e,a=!n||(0,S.OO)({manifest:n.manifest,userConfig:n.settings.userConfig}),r=(0,p.useCallback)(()=>{a||s()},[a,s]),o=(0,p.useCallback)(async e=>{var t;if(!n)return;let l={...n.settings,userConfig:e};await (null===E.Fd||void 0===E.Fd||null==(t=E.Fd.setExtensionSettings)?void 0:t.call(E.Fd,n.id,l)),(0,S.OO)({manifest:n.manifest,userConfig:e})||s()},[n,s]);return n&&t&&i?(0,l.jsx)(O.aF,{isOpen:t,onClose:r,modalSize:"lg",title:(0,l.jsxs)("div",{className:"font-ui inline-flex flex-row gap-2 items-center text-xl",children:[(0,l.jsx)(f.A,{defaultMessage:"Configure",id:"9t1iivhk67"}),(0,l.jsxs)("div",{className:"inline-flex flex-row gap-1 items-center",children:[(0,l.jsx)(v.z,{size:30,imageSize:20,type:"external",src:i.iconUrl,name:i.name}),(0,l.jsxs)("span",{className:"font-normal",children:[" ",i.name]})]})]}),children:(0,l.jsx)(T.S,{manifest:n.manifest,settings:n.settings,onSave:async e=>{await o(e)},onCancel:s})}):null},$=e=>{let{directoryServer:t}=e,s=(0,g.A)(),{extensions:n}=(0,F.O)(),a=(0,D.useRouter)(),r=n.find(e=>e.id===t.uuid),[o,d]=(0,p.useState)(!1),c=(0,p.useCallback)(()=>{r&&a.push("/settings/desktop/extensions/".concat(r.id))},[a,r]),u=(0,F.U)(),m=(0,_.Z)(t.uuid),x=(0,_.Z)(r);(0,p.useEffect)(()=>{m===t.uuid&&!x&&r&&(0,S.OO)({manifest:r.manifest,userConfig:r.settings.userConfig})&&d(!0)},[t.uuid,x,m,r]);let[h,v]=(0,p.useState)(null);if((0,p.useEffect)(()=>{var e;null===E.Fd||void 0===E.Fd||null==(e=E.Fd.onExtensionDownloadProgress)||e.call(E.Fd,(e,s,l,n)=>{e===t.uuid&&v({progress:s,rBytes:l,tBytes:n})})},[t.uuid]),(0,p.useEffect)(()=>{v(null)},[t.uuid]),(0,p.useEffect)(()=>{r&&h&&v(null)},[h,r]),!r&&null!==h){let e=s.formatMessage({defaultMessage:"Installing...",id:"r9ELLACQn2"});return(0,l.jsx)(z.P.div,{initial:{height:0},animate:{height:"auto"},className:"overflow-hidden",children:(0,l.jsx)("div",{className:"flex items-center justify-between bg-bg-000 rounded-lg px-4 py-3 gap-4 mt-4",children:(0,l.jsxs)("div",{className:"flex flex-col gap-1 w-full",children:[(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[h.tBytes?(0,l.jsx)("span",{className:"font-medium text-text-300 text-sm",children:e}):(0,l.jsx)(A.A,{className:"text-sm",children:e}),h.tBytes?(0,l.jsxs)("span",{className:"text-text-500 text-sm",children:[V()(h.rBytes,{maximumFractionDigits:1,locale:s.locale})," / ",V()(h.tBytes,{maximumFractionDigits:1,locale:s.locale})]}):null]}),(0,l.jsx)("div",{className:"bg-bg-500 w-full h-2 rounded-full p-0.5 overflow-hidden",children:(0,l.jsx)("div",{className:"bg-accent-secondary-200 h-full rounded-full transition-width duration-500",style:{width:"".concat(h.progress,"%")}})})]})})})}return r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex items-center justify-between bg-bg-000 rounded-lg px-4 py-3 gap-4 mt-4",children:[(0,l.jsx)("div",{className:"flex items-center gap-3",children:!r.settings.isEnabled&&(0,S.OO)({manifest:r.manifest,userConfig:r.settings.userConfig})?(0,l.jsx)("span",{className:"text-sm text-accent-secondary-100",children:s.formatMessage({defaultMessage:"This connector needs to be configured before it can be enabled.",id:"IhPSab4yuz",description:"Message shown when required config is missing"})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"inline-block",onClick:()=>{u(r.id)},children:(0,l.jsx)(k.j,{checked:r.settings.isEnabled,readOnly:!0})}),(0,l.jsx)("span",{className:"text-sm font-medium",children:r.settings.isEnabled?s.formatMessage({defaultMessage:"Enabled",id:"cnxLJKBabd",description:"Extension enabled status"}):s.formatMessage({defaultMessage:"Disabled",id:"4PQSGeQCas",description:"Extension disabled status"})})]})}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)(q.X,{extension:r}),(0,l.jsx)(i.$,{variant:"secondary",size:"sm",onClick:c,children:(0,l.jsx)(f.A,{defaultMessage:"Configure",id:"9t1iivhk67"})})]})]}),(0,l.jsx)(B,{isOpen:o,extension:r||null,server:t,onClose:()=>{d(!1)}})]}):null};var R=s(98421),I=s(6551),L=s(39383);let H=e=>{let{directoryServer:t,allowlistMode:s=!1,...n}=e,i=(0,c.V)();return(0,l.jsxs)(a.r,{containerClassName:"max-h-full min-h-0 px-4 -mx-4",className:"max-h-full px-4 -mx-4 pb-10",children:[(0,l.jsx)(U,{directoryServer:t,allowlistMode:s,...n}),"local"===t.type&&!s&&(0,l.jsx)($,{directoryServer:t}),(0,l.jsx)(Z,{directoryServer:t,allowlistMode:s}),"local"===t.type&&i&&!s?(0,l.jsx)(w,{manifest:t.manifest}):null,(0,l.jsx)(Y,{directoryServer:t})]})},U=e=>{let{directoryServer:t,allowlistMode:s=!1,...a}=e,r=(0,c.V)(),{isDirectoryEnabled:o}=(0,F.O)(),{iconUrl:d,name:m,oneLiner:x}=t;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flex sm:flex-row flex-col gap-y-6 gap-x-4 mt-[1.125rem]",children:[(0,l.jsxs)("div",{className:"flex flex-row no-wrap gap-4 grow",children:[(0,l.jsx)(v.z,{size:60,imageSize:34,name:m,..."local"===t.type?{type:"external",src:d}:"firstParty"===t.type?{type:"syncSource",src:t.syncSourceType}:{type:"favicon",src:d}}),(0,l.jsxs)("div",{className:"flex flex-col font-ui grow sm:mt-1",children:[(0,l.jsx)("p",{className:"text-text-100 text-2xl font-medium",children:m}),(0,l.jsx)("p",{className:"font-base text-text-400 leading-normal",children:x})]})]}),(0,l.jsx)("div",{className:"flex items-center",children:"remote"===t.type?(0,l.jsx)(I.k,{isDetailedView:!0,directoryServer:t,...a}):"firstParty"===t.type?(0,l.jsx)(M.N,{isDetailedView:!0,directoryServer:t,...a}):(0,l.jsx)(R.H,{isDetailedView:!0,directoryServer:t,allowlistMode:s,onAddToAllowlist:a.handleAddToAllowlist,onRemoveFromAllowlist:a.handleRemoveFromAllowlist})})]}),"local"!==t.type||r||s?null:(0,l.jsx)(n.l,{variant:"secondary",className:"mt-6 w-full",message:(0,l.jsx)(f.A,{defaultMessage:"Get Claude for Desktop to use this extension",id:"pJ3vQABZxc"}),customButton:(0,l.jsx)(i.$,{href:"https://claude.ai/download",target:"_blank",children:(0,l.jsx)(f.A,{defaultMessage:"Download",id:"5q3qC0sC3r"})})}),"local"===t.type&&t.onDiskPath?(0,l.jsx)(n.l,{variant:"danger",className:"mt-6 w-full",message:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("h2",{className:"font-large-bold",children:(0,l.jsx)(f.A,{defaultMessage:"Only install extensions from developers you trust.",id:"J1DujH3Us6"})}),(0,l.jsx)("span",{children:(0,l.jsx)(f.A,{defaultMessage:"Installing will grant access to everything on your computer.",id:"V/YZmv6ycC"})})]}),icon:u.i}):null,"local"!==t.type||o?null:(0,l.jsx)(n.l,{variant:"secondary",className:"mt-6 w-full",message:(0,l.jsx)(f.A,{defaultMessage:"The Extensions Directory has been disabled on this device. Please contact your IT administrator for more information.",id:"uOwKLoFioe",description:"Message shown when viewing a local extension but the directory is disabled"})})]})},Z=e=>{let{directoryServer:t,allowlistMode:s=!1}=e,n=(0,g.A)(),i=(0,h.vx)(),{getCorrespondingInstalledServer:a}=(0,L.Y5)(),r=(0,c.V)(),o=(0,c.V)(d.Wq),u="remote"===t.type&&!!a(t),m="remote"===t.type&&!i&&!u,{description:p,toolNames:v,promptNames:j,author:y}=t;return(0,l.jsxs)("div",{className:"flex flex-col gap-7 py-7 border-b-0.5 border-border-300",children:[!!m&&(0,l.jsx)(W,{children:(0,l.jsx)(f.A,{defaultMessage:"Ask your admin to add this for your team.",id:"Pf4A5vNvrs"})}),"local"===t.type&&r&&!o&&!s&&(0,l.jsx)(W,{children:(0,l.jsx)(f.A,{defaultMessage:"To install this extension, update to the latest version of Claude Desktop",id:"B9KzONSVUz",description:"update claude for desktop prompt to install desktop extensions"})}),(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[!!(null==y?void 0:y.name)&&(0,l.jsx)("p",{className:"text-text-300 text-base",children:(0,l.jsx)(f.A,{defaultMessage:"Developed by <a></a>",id:"4MPJbn/XP2",values:{a:()=>(null==y?void 0:y.url)?(0,l.jsx)(et,{name:y.name,url:y.url}):y.name}})}),!!p&&(0,l.jsx)(N,{className:"text-text-300 text-base",markdown:p})]}),!!(v.length||j.length)&&(0,l.jsxs)("div",{className:(0,x.A)("grid gap-y-8 gap-x-4",v.length&&j.length?"grid-cols-1 sm:grid-cols-2":"grid-cols-1"),children:[!!v.length&&(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsx)(G,{title:n.formatMessage({defaultMessage:"Tools",id:"nUT0LvZVOx"}),count:v.length}),(0,l.jsx)(Q,{items:v})]}),!!j.length&&(0,l.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,l.jsx)(G,{title:n.formatMessage({defaultMessage:"Prompts",id:"p7buKPIFPB"}),count:j.length}),(0,l.jsx)(Q,{items:j})]})]})]})},W=e=>{let{children:t}=e;return(0,l.jsx)("div",{className:"bg-bg-300 rounded-lg p-4 text-text-100 text-sm px-4 py-3",children:t})},Y=e=>{let{directoryServer:t}=e,{didCopy:s,copyToClipboard:n}=(0,o.C)(),a=(0,g.A)(),{version:r,license:d,author:c,documentation:u,support:m,privacyPolicy:x}=t,p="remote"===t.type?t.url:null,h="local"===t.type&&t.manifest.privacy_policies||[],v=h.length>0?h.map(e=>({name:a.formatMessage({defaultMessage:"Privacy Policy",id:"vx0nkZ8xpy"}),url:e})):x?[{name:a.formatMessage({defaultMessage:"Privacy Policy",id:"vx0nkZ8xpy"}),url:x}]:[],j=[...u?[{name:a.formatMessage({defaultMessage:"Documentation",id:"isGKnzG5uL"}),url:u}]:[],...m?[{name:a.formatMessage({defaultMessage:"Support",id:"HqRNN8pEq/"}),url:m}]:[],...v];return(0,l.jsxs)("div",{className:"flex flex-col gap-4 py-7",children:[(0,l.jsx)(K,{children:(0,l.jsx)(f.A,{defaultMessage:"Details",id:"Lv0zJuL1jH"})}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[!!r&&(0,l.jsx)(ee,{subheading:a.formatMessage({defaultMessage:"Version",id:"I3b4hnFnDd"}),children:r}),!!d&&(0,l.jsx)(ee,{subheading:a.formatMessage({defaultMessage:"License",id:"HBxXD/YXNW"}),children:d}),!!(null==c?void 0:c.name)&&(0,l.jsx)(ee,{subheading:a.formatMessage({defaultMessage:"Author",id:"tWkQ2JF/jQ"}),children:c.url?(0,l.jsx)(et,{name:c.name,url:c.url}):c.name}),!!p&&(0,l.jsx)(ee,{subheading:a.formatMessage({defaultMessage:"Connector URL",id:"CV2vjsP6Ub"}),children:(0,l.jsxs)("div",{className:"flex flex-row items-center gap-1",children:[p,(0,l.jsx)(i.$,{size:"icon_sm",variant:"ghost",className:"bg-bg-100 hover:opacity-100 -my-2",onClick:()=>void n(p),children:(0,l.jsx)(o.u,{didCopy:s})})]})}),!!j.length&&(0,l.jsx)(ee,{subheading:a.formatMessage({defaultMessage:"More info",id:"HOsSgXORHL"}),children:j.map(e=>(0,l.jsx)(et,{name:e.name,url:e.url},e.name))})]})]})},Q=e=>{var t,s;let{items:n}=e,i=p.useRef(null),a=p.useRef(null),[r,o]=(0,p.useState)(!1),[d,c]=(0,p.useState)(((null==(t=a.current)?void 0:t.offsetHeight)||0)>((null==(s=i.current)?void 0:s.offsetHeight)||0));return(0,p.useEffect)(()=>{var e,t;c(((null==(e=a.current)?void 0:e.offsetHeight)||0)>((null==(t=i.current)?void 0:t.offsetHeight)||0))},[n]),(0,l.jsxs)("div",{className:"flex flex-col gap-2.5 items-start",children:[(0,l.jsx)("div",{ref:i,className:(0,x.A)("w-full",!r&&"max-h-[6.5rem] overflow-hidden"),children:(0,l.jsx)("div",{ref:a,className:(0,x.A)("flex flex-row gap-2.5 flex-wrap"),children:n.map(e=>(0,l.jsx)(J,{children:e},e))})}),d&&!r&&(0,l.jsx)("button",{className:"text-text-300 hover:text-text-200 opacity-50 text-sm",onClick:()=>o(!0),children:(0,l.jsx)(f.A,{defaultMessage:"View all",id:"pFK6bJU0EM"})})]})},J=e=>{let{children:t}=e;return(0,l.jsx)("div",{className:"inline-flex items-center h-7 rounded-full px-3 bg-bg-300 border-border-300 border-0.5 min-w-0",children:(0,l.jsx)("p",{className:"text-text-300 text-sm overflow-hidden text-ellipsis",children:t})})},G=e=>{let{count:t,title:s}=e;return(0,l.jsxs)("div",{className:"flex flex-row items-center gap-2 mb-0.5",children:[(0,l.jsx)(K,{children:s}),(0,l.jsx)("div",{className:"flex items-center rounded text-[0.8125rem] text-text-500 h-[1.125rem] px-[0.3125rem] bg-bg-300",children:t})]})},K=e=>{let{children:t}=e;return(0,l.jsx)("h3",{className:"text-text-100 font-medium text-base",children:t})},X=e=>{let{children:t}=e;return(0,l.jsx)("h3",{className:"text-text-300 font-medium text-sm mb-0.5",children:t})},ee=e=>{let{subheading:t,children:s}=e;return(0,l.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,l.jsx)(X,{children:t}),(0,l.jsx)("div",{className:"flex flex-col gap-1 text-text-300 text-sm",children:s})]})},et=e=>{let{name:t,url:s}=e;return(0,l.jsxs)(r.Y,{href:s,target:"_blank",className:"inline-flex items-center gap-1",children:[t,(0,l.jsx)(m.k,{size:16})]})}},78519:(e,t,s)=>{s.d(t,{So:()=>o,wH:()=>d,yo:()=>c});var l=s(53592),n=s(7620),i=s(2574),a=s(28726),r=s(40459);let o=async e=>{try{var t;let s=await (null===l.Fd||void 0===l.Fd||null==(t=l.Fd.getCompatibilityCheckResult)?void 0:t.call(l.Fd));return function(e,t){var s,l,n;let r=[];if(!t)return r.push("claude-version-mismatch"),{compatible:!1,errorCodes:r};let o=function(e){var t;if(!(null==(t=e.compatibility)?void 0:t.platforms))return{compatible:!0};let s=(0,a.E)(),l=null==s?void 0:s.platform;return l&&e.compatibility.platforms.includes(l)?{compatible:!0}:{compatible:!1,errorCodes:["platform-mismatch"]}}(e);!o.compatible&&o.errorCodes&&r.push(...o.errorCodes);let d=(s=e,l=t,(null==(n=s.compatibility)?void 0:n.claude_desktop)&&l.appVersion?(0,i.satisfies)(l.appVersion,s.compatibility.claude_desktop)?{compatible:!0}:{compatible:!1,errorCodes:["claude-version-mismatch"]}:{compatible:!0});!d.compatible&&d.errorCodes&&r.push(...d.errorCodes);let c=function(e,t){if(!t.supportedLatestMcpbManifestVersion)return{compatible:!0};let s=e.manifest_version||e.dxt_version;if(!s)return{compatible:!0};let l=parseFloat(String(s)),n=parseFloat(t.supportedLatestMcpbManifestVersion);return isNaN(l)||isNaN(n)?{compatible:!0}:l>n?{compatible:!1,errorCodes:["manifest-version-mismatch"]}:{compatible:!0}}(e,t);if(!c.compatible&&c.errorCodes&&r.push(...c.errorCodes),"node"===e.server.type){let s=function(e,t){var s,l;if("node"!==e.server.type)return{compatible:!0};let n=e.server.mcp_config.command,{builtInNodeVersion:a,nodeVersion:r}=t,o=null==(l=e.compatibility)||null==(s=l.runtimes)?void 0:s.node;if(r&&(!o||o&&(0,i.satisfies)(r,o)))return{compatible:!0};if(a){let e=n&&/^node(\.exe)?$/.test(n),t=!o||(0,i.satisfies)(a,o);return e||r?t?{compatible:!0}:{compatible:!1,errorCodes:["built-in-node-version-mismatch"]}:{compatible:!1,errorCodes:["no-node-installed-and-not-node-command"]}}return r||a?{compatible:!0}:{compatible:!1,errorCodes:["no-node-and-no-built-in-node"]}}(e,t);!s.compatible&&s.errorCodes&&r.push(...s.errorCodes)}else if("python"===e.server.type){let s=function(e,t){var s,l;if("python"!==e.server.type)return{compatible:!0};let{pythonVersion:n}=t,a=null==(l=e.compatibility)||null==(s=l.runtimes)?void 0:s.python;return n?a?(0,i.satisfies)(n,a)?{compatible:!0}:{compatible:!1,errorCodes:["python-version-mismatch"]}:{compatible:!0}:{compatible:!1,errorCodes:["no-python-installed"]}}(e,t);!s.compatible&&s.errorCodes&&r.push(...s.errorCodes)}return{compatible:0===r.length,...r.length>0&&{errorCodes:r}}}(e,s||null)}catch(e){return{compatible:!1,errorCodes:["claude-version-mismatch"]}}},d=e=>{let{manifest:t}=e,[s,l]=(0,n.useState)(null),[i,a]=(0,n.useState)(!1),[r,d]=(0,n.useState)(null),c=(0,n.useCallback)(async()=>{if(!t)return void l(null);a(!0),d(null);try{let e=await o(t);l(e)}catch(e){d(e instanceof Error?e:Error("Failed to check compatibility")),l(null)}finally{a(!1)}},[t]);return(0,n.useEffect)(()=>{t?c():(l(null),a(!1),d(null))},[t,c]),{compatibility:s,isChecking:i,error:r,checkCompatibility:c}},c=(e,t)=>{var s,l;let n=[],i=(0,a.E)();if(!e||((e.manifest_version||e.dxt_version)&&n.push({name:"an update to Claude Desktop",met:!(null==t?void 0:t.errorCodes)||!t.errorCodes.includes("manifest-version-mismatch")}),!e.compatibility))return n;if(e.compatibility.platforms&&e.compatibility.platforms.length>0){let s={win32:"Windows",darwin:"macOS",linux:"Linux"},l=s[r.platform]||(null==i?void 0:i.platform),a=e.compatibility.platforms.map(e=>s[e]||e).join(", "),o=!(null==t?void 0:t.errorCodes)||!t.errorCodes.includes("platform-mismatch");n.push({name:o?l:a,met:o})}if(e.compatibility.claude_desktop&&n.push({name:"Claude Desktop ".concat(e.compatibility.claude_desktop),met:!(null==t?void 0:t.errorCodes)||!t.errorCodes.includes("claude-version-mismatch")}),"node"===e.server.type&&(null==(s=e.compatibility.runtimes)?void 0:s.node)){let s=["node-version-mismatch","no-node-installed-and-not-node-command","no-node-and-no-built-in-node","built-in-node-version-mismatch"];n.push({name:"Node.js ".concat(e.compatibility.runtimes.node),met:!(null==t?void 0:t.errorCodes)||!t.errorCodes.some(e=>s.includes(e))})}else if("node"===e.server.type){let e=["no-node-installed-and-not-node-command","no-node-and-no-built-in-node"];n.push({name:"Node.js",met:!(null==t?void 0:t.errorCodes)||!t.errorCodes.some(t=>e.includes(t))})}if("python"===e.server.type&&(null==(l=e.compatibility.runtimes)?void 0:l.python)){let s=["python-version-mismatch","no-python-installed"];n.push({name:"Python ".concat(e.compatibility.runtimes.python),met:!(null==t?void 0:t.errorCodes)||!t.errorCodes.some(e=>s.includes(e))})}else"python"===e.server.type&&n.push({name:"Python",met:!(null==t?void 0:t.errorCodes)||!t.errorCodes.includes("no-python-installed")});return n}},90741:(e,t,s)=>{s.d(t,{S:()=>p});var l=s(54568),n=s(35984),i=s(84284),a=s(23812),r=s(53592),o=s(19286),d=s(98304),c=s(16),u=s(7620),m=s(10369),x=s(59666);let p=e=>{let{manifest:t,settings:s,onSave:p,onCancel:f,className:g}=e,h=(0,m.A)(),{addError:v}=(0,n.Y)(),[j,y]=(0,u.useState)({}),[b,w]=(0,u.useState)(!1),[C,N]=(0,u.useState)(!1),[F,M]=(0,u.useState)(!1);if((0,u.useEffect)(()=>{if(s.userConfig)y(s.userConfig);else if(t.user_config){let e={};for(let[s,l]of Object.entries(t.user_config))void 0!==l.default&&(e[s]=l.default);y(e)}},[t.user_config,s.userConfig]),!t.user_config)return null;let k=(e,t)=>{y(s=>({...s,[e]:t})),w(!0)},A=async()=>{N(!0);try{await p(j),w(!1),M(!0),setTimeout(()=>{M(!1)},1e4)}catch(e){v((0,l.jsx)(x.A,{defaultMessage:"Failed to save configuration",id:"k3HNr+oyR6",description:"Error message when extension configuration save fails"}),{error:e})}finally{N(!1)}};return(0,l.jsx)("div",{className:g,children:(0,l.jsxs)("div",{className:"break-inside-avoid",children:[Object.entries(t.user_config).map(e=>{let[t,s]=e;return(0,l.jsx)("div",{className:"mb-5",children:(0,l.jsxs)("label",{children:[(0,l.jsxs)("div",{className:"mb-2",children:[(0,l.jsx)("span",{className:"text-md",children:s.title}),s.required&&(0,l.jsx)("span",{className:"text-text-400 ml-1",children:(0,l.jsx)(x.A,{defaultMessage:"(Required)",id:"5Q3Kor4lDg",description:"Label indicating a configuration field is required"})})]}),s.description&&"boolean"!==s.type&&(0,l.jsx)("p",{className:"text-xs text-text-400 mt-2 mb-3",children:s.description}),(0,l.jsx)("div",{className:"mb-2 mt-2",children:((e,t)=>{let s=j[e],n="w-full px-3 py-2 border border-border-300/25 rounded-md text-sm text-text-100 bg-bg-100";switch(t.type){case"string":return(0,l.jsx)("input",{type:t.sensitive?"password":"text",value:s||"",onChange:t=>k(e,t.target.value),placeholder:t.description,className:n});case"number":return(0,l.jsx)("input",{type:"number",value:s||"",onChange:t=>k(e,t.target.value?Number(t.target.value):""),min:t.min,max:t.max,placeholder:t.description,className:n});case"boolean":return(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)(i.j,{checked:s||!1,onChange:t=>k(e,t.target.checked)}),(0,l.jsx)("span",{className:"text-sm text-text-300",children:t.description})]});case"directory":case"file":if(!t.multiple)return(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("input",{type:"text",value:s||"",onChange:t=>k(e,t.target.value),placeholder:h.formatMessage({defaultMessage:"{type} path",id:"p8XbPZF2o4",description:"Placeholder for directory or file path input"},{type:"directory"===t.type?"Directory":"File"}),className:"".concat(n," flex-1 w-auto")}),(0,l.jsx)(a.$,{variant:"secondary",onClick:async()=>{var s,l;let n="directory"===t.type?await (null===r.un||void 0===r.un||null==(s=r.un.getDirectoryPath)?void 0:s.call(r.un,!1)):await (null===r.un||void 0===r.un||null==(l=r.un.getFilePath)?void 0:l.call(r.un,!1));n&&k(e,n[0])},className:"px-3 py-1.5",children:h.formatMessage({defaultMessage:"Browse",id:"0TPgIp3K/q",description:"Button to browse for file/directory"})})]});{let i=s||[];return(0,l.jsxs)("div",{children:[i.map((s,c)=>(0,l.jsxs)("div",{className:"flex gap-2 mb-2 items-center",children:[(0,l.jsx)("input",{type:"text",value:s,onChange:t=>{let s=[...i];s[c]=t.target.value,k(e,s)},placeholder:h.formatMessage({defaultMessage:"{type} path",id:"p8XbPZF2o4",description:"Placeholder for directory or file path input"},{type:"directory"===t.type?"Directory":"File"}),className:"".concat(n," flex-1 w-auto")}),(0,l.jsx)(a.$,{variant:"ghost",size:"icon",onClick:async()=>{var s,l;let n="directory"===t.type?await (null===r.un||void 0===r.un||null==(s=r.un.getDirectoryPath)?void 0:s.call(r.un,!1)):await (null===r.un||void 0===r.un||null==(l=r.un.getFilePath)?void 0:l.call(r.un,!1));if(n){let t=[...i];t[c]=n[0],k(e,t)}},children:(0,l.jsx)(o.sj,{})}),(0,l.jsx)(a.$,{variant:"ghost",size:"icon",onClick:()=>{k(e,i.filter((e,t)=>t!==c))},children:(0,l.jsx)(d.u,{})})]},c)),(0,l.jsxs)(a.$,{variant:"secondary",onClick:()=>{k(e,[...i,""])},className:"mt-2",children:[(0,l.jsx)(c.c,{className:"mr-1.5",size:16}),h.formatMessage({defaultMessage:"Add {type}",id:"1ddlPuxY71",description:"Button to add a new path"},{type:t.type})]})]})}default:return null}})(t,s)})]})},t)}),(0,l.jsxs)("div",{className:"flex gap-3 mt-6 justify-between items-center",children:[f&&(0,l.jsx)(a.$,{variant:"secondary",onClick:f,disabled:C,children:h.formatMessage({defaultMessage:"Cancel",id:"zVjtFM8JfM",description:"Button to cancel configuration edit"})}),F&&(0,l.jsx)("span",{className:"text-sm text-accent-secondary-100",children:h.formatMessage({defaultMessage:"Changes saved",id:"jdKVJo/vQ6",description:"Message shown after configuration is saved"})}),!F&&(0,l.jsx)("div",{}),(0,l.jsx)(a.$,{variant:"primary",onClick:A,disabled:!b||C,children:h.formatMessage({defaultMessage:"Save",id:"NuymVHsb1A",description:"Button to save configuration"})})]})]})})}},91877:(e,t,s)=>{s.d(t,{r:()=>o});var l=s(54568),n=s(23812),i=s(67453),a=s(72902),r=s(59666);let o=e=>{let{onClick:t,className:s,children:o,disabled:d,...c}=e;return(0,l.jsx)(i.Tooltip,{tooltipContent:!d&&(0,l.jsx)(r.A,{defaultMessage:"Connect",id:"+vVZ/G11Zg"}),children:(0,l.jsx)(n.$,{className:(0,a.A)("!border-border-300 !rounded-lg",d?"!text-text-400":"hover:!bg-bg-200",s),disabled:d,onClick:e=>{e.stopPropagation(),null==t||t(e)},variant:"secondary",size:"icon_sm",...c,children:o})})}},94470:(e,t,s)=>{s.d(t,{l:()=>c,z:()=>m});var l=s(54568),n=s(89626),i=s(54616),a=s(72902),r=s(7620),o=s(23812);let d=(0,i.F)("flex\n  w-fit\n  rounded-lg\n  p-2\n  px-4\n  gap-1\n  items-center\n  text-sm\n  border-0.5\n  border-border-200\n",{variants:{variant:{main:"text-accent-main-000 bg-bg-300",secondary:"text-accent-secondary-000 bg-bg-300",pro:"text-accent-pro-000 border-accent-pro-100 bg-accent-pro-900",danger:"text-danger-000 border-danger-100 bg-danger-900"}},defaultVariants:{variant:"main"}});function c(e){let{icon:t,iconClassName:s,message:i,customButton:c,cta:m,ctaHref:x,onCtaClick:p,onClose:f,variant:g,className:h,messageClassName:v}=e,j=t?(0,l.jsx)("div",{className:(0,a.A)("flex mr-2 shrink-0",s),children:r.createElement(t,{size:20})}):null,y=null;return f&&(y=(0,l.jsx)(o.$,{size:"icon_sm",variant:"ghost",onClick:f,children:(0,l.jsx)(n.X,{size:16})})),y=y?(0,l.jsx)("div",{children:y}):null,(0,l.jsxs)("div",{className:(0,a.A)(d({variant:g}),!!f&&"pr-2",h),children:[j,(0,l.jsx)("div",{className:(0,a.A)("grow leading-relaxed","danger"!==g&&"pro"!==g&&"text-text-000","danger"===g&&"text-danger-000","pro"===g&&"text-accent-pro-000",v),children:i}),(0,l.jsx)(u,{customButton:c,cta:m,ctaHref:x,onCtaClick:p,variant:"pro"===g?"claude":function(e){switch(e){case"main":return"primary";case"danger":return"danger";case"secondary":case"pro":return"secondary"}}(g),className:(0,a.A)("pro"===g&&"!bg-accent-pro-100 border-accent-pro-100 hover:border-accent-pro-200 hover:bg-accent-pro-900"),size:"sm"}),y]})}function u(e){let{customButton:t,cta:s,ctaHref:n,onCtaClick:i,...a}=e,r=t;return!r&&s&&(n?r=(0,l.jsx)(o.$,{size:"default",...a,href:n,children:s}):i&&(r=(0,l.jsx)(o.$,{size:"default",...a,onClick:i,children:s}))),r?(0,l.jsx)("div",{className:"ml-2",children:r}):null}let m=e=>{let{className:t,children:s}=e;return(0,l.jsxs)("div",{className:(0,a.A)("border-border-300 bg-bg-300 mt-3 flex gap-2 rounded-lg border px-3 py-3",t),children:[(0,l.jsx)("div",{children:(0,l.jsx)(n.R2D,{size:20,className:"text-accent-main-100"})}),(0,l.jsx)("p",{className:"text-text-100 text-sm",children:s})]})}},98421:(e,t,s)=>{s.d(t,{H:()=>C});var l=s(54568),n=s(37541),i=s(28044),a=s(17560),r=s(7620),o=s(8177),d=s(23812),c=s(59666);let u=e=>{let{directoryServer:t,onAddToAllowlist:s,onRemoveFromAllowlist:n}=e,i=(0,r.useCallback)(()=>{t.isAllowlisted?null==n||n(t.uuid):null==s||s(t.uuid)},[t,s,n]);return(0,l.jsx)(d.$,{variant:"primary",size:"unset",className:"!rounded-lg !text-sm relative h-8 rounded-md px-3 active:scale-[0.985] whitespace-nowrap !text-xs transition-[min-width] duration-200 min-w-[6rem]",onClick:i,children:t.isAllowlisted?(0,l.jsx)(c.A,{defaultMessage:"Remove from allowlist",id:"+IiLva9Ycy"}):(0,l.jsx)(c.A,{defaultMessage:"Add to your team",id:"Bq/DQi0LBe"})})};var m=s(74813),x=s(64328),p=s(54787),f=s(67453),g=s(53592),h=s(72902),v=s(10369),j=s(2574),y=s(78519),b=s(28726);let w=e=>{var t,s;let{directoryServer:n}=e,i=(0,v.A)(),{track:a}=(0,m.st)(),{activeOrganization:o}=(0,x.YL)(),[{installed:u,progress:w,installedVersion:C},N]=(0,r.useState)({installed:null,progress:null,installedVersion:null}),{compatibility:F}=(0,y.wH)({manifest:n.manifest}),M=(null==F?void 0:F.compatible)===!1,k=(0,y.yo)(n.manifest,F).filter(e=>!e.met),A=null!=(s=null==o||null==(t=o.settings)?void 0:t.is_desktop_extension_allowlist_enabled)&&s,E=!!n.onDiskPath,S=A&&E,_=u&&C&&n.version&&n.onDiskPath&&j.gt(n.version,C);(0,r.useEffect)(()=>{var e;null===g.Fd||void 0===g.Fd||null==(e=g.Fd.onExtensionDownloadProgress)||e.call(g.Fd,(e,t)=>{e===n.uuid&&N(e=>({...e,installed:!1,progress:t}))})},[n.uuid]),(0,r.useEffect)(()=>{var e;N({installed:null,progress:null,installedVersion:null});let t=()=>{var e;null===g.Fd||void 0===g.Fd||null==(e=g.Fd.getInstalledExtensionsWithState)||e.call(g.Fd).then(e=>{let t=e.find(e=>e.id===n.uuid);N(e=>{var s;return{installed:!!t,progress:t?null:e.progress,installedVersion:null!=(s=null==t?void 0:t.manifest.version)?s:null}})})};return t(),null===g.Fd||void 0===g.Fd||null==(e=g.Fd.onExtensionsChanged)?void 0:e.call(g.Fd,t)},[n.uuid]);let z=(0,r.useCallback)(async()=>{var e,t,s,l,i,r,o;if(u&&!_)null===g.Fd||void 0===g.Fd||null==(e=g.Fd.deleteExtension)||e.call(g.Fd,n.uuid),N({installed:null,progress:null,installedVersion:null});else{n.onDiskPath?(null===g.Fd||void 0===g.Fd||null==(i=g.Fd.installExtensionFromPreview)||i.call(g.Fd,n.uuid,n.onDiskPath),N({installed:null,progress:null,installedVersion:null})):null===g.Fd||void 0===g.Fd||null==(r=g.Fd.installDxtFromDirectory)||r.call(g.Fd,n.uuid,null);let e=await (null===g.Fd||void 0===g.Fd||null==(t=g.Fd.getInstalledExtensionsWithState)?void 0:t.call(g.Fd)),d=(null!=(o=null==e?void 0:e.length)?o:0)+1,c=(0,b.E)();a({event_key:"desktop_dxt_installed",extension_name:n.name,extension_author:(null==(s=n.author)?void 0:s.name)||"",extension_id:n.uuid,event_source:n.onDiskPath?"local_file":"directory",total_extensions_installed:d,app_version:(null==c?void 0:c.version)||"",extension_version:(null==(l=n.manifest)?void 0:l.version)||""})}},[n,u,_,a]);if(!1===u&&null!==w)return null;let D=null===u,P=(0,l.jsx)(d.$,{variant:"primary",size:"unset",className:(0,h.A)("!rounded-lg !text-sm relative h-8 rounded-md px-3 active:scale-[0.985] whitespace-nowrap !text-xs transition-[min-width] duration-200",null!==w&&"min-w-[8rem] bg-primary disabled:opacity-100","min-w-[6rem]"),onClick:z,disabled:null!==w||null===u||M||S,children:u?_?(0,l.jsx)(c.A,{defaultMessage:"Update",id:"BWpuKlRSA1"}):(0,l.jsx)(c.A,{defaultMessage:"Uninstall",id:"a8npXIgle+"}):D?(0,l.jsx)(p.j,{width:60,height:12}):(0,l.jsx)(c.A,{defaultMessage:"Install",id:"ubmFc8rrea"})});if(M&&!u||S){let e;if(S)e=i.formatMessage({defaultMessage:"This extension cannot be installed. Contact your organization owner.",id:"O3dmhm2fqZ"});else if(0===k.length)e=i.formatMessage({defaultMessage:"This extension is not compatible with your device.",id:"DyWnSo/uD3"});else if(1===k.length)e=i.formatMessage({defaultMessage:"This extension requires {requirement}.",id:"RWZ5Obf4In"},{requirement:k[0].name});else{let t=k.map(e=>e.name).join(", ");e=i.formatMessage({defaultMessage:"This extension requires: {requirements}.",id:"Tiuglra9gk"},{requirements:t})}return(0,l.jsx)(f.Tooltip,{tooltipContent:e,children:(0,l.jsx)("span",{className:"inline-block",children:P})})}return P},C=e=>{let{isDetailedView:t,directoryServer:s,allowlistMode:r=!1,onAddToAllowlist:d,onRemoveFromAllowlist:c}=e,m=(0,i.V)(n.Wq),{extensions:x,isDirectoryEnabled:p}=(0,o.O)(),f=x.some(e=>e.id===s.uuid),g=!0===s.isAllowlisted;if(t)if(r)return(0,l.jsx)(u,{directoryServer:s,onAddToAllowlist:d,onRemoveFromAllowlist:c});else if(m&&p)return(0,l.jsx)(w,{directoryServer:s});else return null;return(r?g:f)?(0,l.jsx)(a.S,{size:16,className:"transition-opacity m-2 text-accent-secondary-100"}):null}}}]);