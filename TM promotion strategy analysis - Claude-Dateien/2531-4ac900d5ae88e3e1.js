"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2531],{22624:(e,t,n)=>{n.d(t,{K:()=>l,p:()=>u});var a=n(64328),i=n(60687),r=n(95617),o=n(66365);let l=()=>{let e=(0,a.O9)(),t=(0,a.zc)(),n=(0,a.mV)(),{selectedTier:l,shouldOverrideFeatureAccess:u,isTierSelectorEnabled:s}=(0,i.t)(),d=(0,o.useDynamicConfig)("claude_ai_projects_limits").get("max_free_projects",0)>0,c=s&&u&&l?l===r.d7.PRO||l===r.d7.MAX||l===r.d7.ENTERPRISE:e||t||n,g=(0,o.useLayer)("trials_freemium").get("free_project",!1);return d||c||g},u=()=>{let e=(0,a.O9)(),t=(0,a.zc)(),n=(0,a.mV)(),{selectedTier:l,shouldOverrideFeatureAccess:u,isTierSelectorEnabled:s}=(0,i.t)(),d=(0,o.useDynamicConfig)("claude_ai_projects_limits"),c=(0,o.useLayer)("trials_freemium");if(s&&u&&l?l===r.d7.PRO||l===r.d7.MAX||l===r.d7.ENTERPRISE:e||t||n)return;let g=d.get("max_free_projects",0);return g>0?g:+!!c.get("free_project",!1)}},34003:(e,t,n)=>{n.d(t,{EG:()=>h,FX:()=>p,Gh:()=>g,JO:()=>w,UA:()=>y,Vx:()=>z,Vy:()=>v,Yl:()=>j,d6:()=>Y,p0:()=>_,t5:()=>f,u9:()=>L,up:()=>k,ut:()=>m});var a=n(94295),i=n(1613),r=n(64328),o=n(35984),l=n(80688),u=n(68067),s=n(7620),d=n(10369),c=n(24407);function g(){return(0,u.fS)("trials_and_tribulations_of_high_school_football")}function f(){var e,t;let n=(0,r.mV)(),a=(0,r.zm)(),{activeOrganization:o}=(0,r.YL)(),s=(0,u.fS)("default_wiggle_on"),{data:d}=(0,i.Sk)("/api/organizations/".concat(null==o?void 0:o.uuid,"/feature_settings"),{queryKey:[l.RR,null==o?void 0:o.uuid],enabled:!!(null==o?void 0:o.uuid)&&n});if(a)return d?!(null==(t=d.disabled_features)?void 0:t.includes("wiggle")):s;let c=!!d&&!(null==(e=d.disabled_features)?void 0:e.includes("wiggle"));return!n||c}function v(){var e,t;let{activeOrganization:n}=(0,r.YL)(),a=(0,u.fS)("claudeai_default_wiggle_egress_enabled");return null!=(t=null==n||null==(e=n.settings)?void 0:e.enabled_wiggle_egress)?t:a}function p(){var e,t;let{activeOrganization:n}=(0,r.YL)();return null!=(t=null==n||null==(e=n.settings)?void 0:e.wiggle_egress_allowed_hosts)?t:[]}function _(){var e,t;let{activeOrganization:n}=(0,r.YL)(),a=S();return null!=(t=null==n||null==(e=n.settings)?void 0:e.wiggle_egress_hosts_template)?t:a}function m(){var e;let{account:t}=(0,r.YL)(),n=(0,u.fS)("claudeai_default_wiggle_egress_enabled");if(!(null==t?void 0:t.settings))return!1;let a=!!t.settings.wiggle_egress_spotlight_viewed_at;return null!=(e=t.settings.enabled_wiggle_egress)?e:!!a&&n}function y(){var e,t;let{account:n}=(0,r.YL)();return null!=(t=null==n||null==(e=n.settings)?void 0:e.wiggle_egress_allowed_hosts)?t:[]}function S(){return(0,u.T9)("claudeai_default_wiggle_egress_hosts_template","template","package_managers",c.z.string())}function h(){var e,t;let{account:n}=(0,r.YL)(),a=S();return null!=(t=null==n||null==(e=n.settings)?void 0:e.wiggle_egress_hosts_template)?t:a}function b(){var e,t;let{account:n}=(0,r.YL)(),a=(0,u.fS)("default_wiggle_on"),i=(0,u.P0)("wiggle_pro_default_on","default_enabled",void 0,c.z.boolean().optional());if(null==n?void 0:n.settings)return null!=(t=null!=(e=n.settings.enabled_monkeys_in_a_barrel)?e:i)?t:a}function L(){let e=g(),t=f(),n=b();return!!e&&!!t&&n}function j(){let e=g(),t=f();return e&&t}function k(){var e;let t=(0,r.mV)(),{activeOrganization:n}=(0,r.YL)(),{data:a}=(0,i.Sk)("/api/organizations/".concat(null==n?void 0:n.uuid,"/feature_settings"),{queryKey:[l.RR,null==n?void 0:n.uuid],enabled:!!(null==n?void 0:n.uuid)&&t});return!t||!!a&&!(null==(e=a.disabled_features)?void 0:e.includes("skills"))}function w(){let e=L(),t=k(),n=(0,u.fS)("claudeai_skills");return!!e&&t&&n}function Y(){let e=j(),t=(0,u.fS)("claudeai_skills");return e&&t}let z=()=>{let e=(0,d.A)(),{account:t}=(0,r.YL)(),{addSuccess:n}=(0,o.Y)(),i=b(),l=f(),{mutate:u}=(0,a.yJ)(),c=(0,s.useRef)(null==t?void 0:t.settings);return(0,s.useEffect)(()=>{c.current=null==t?void 0:t.settings},[null==t?void 0:t.settings]),{isEnabled:i,toggleWiggle:(0,s.useCallback)(a=>{if(t&&l){if(a){var i,r;let t=null==(i=c.current)?void 0:i.enabled_artifacts_attachments,a=[];t&&a.push("Analysis Tool"),a.length>0&&n(e.formatMessage({defaultMessage:"Automatically disabled: {features}",id:"7StJBCedWA"},{features:a.join(", ")})),(null==(r=c.current)?void 0:r.preview_feature_uses_artifacts)||n(e.formatMessage({defaultMessage:"Automatically enabled: Artifacts",id:"v5zt5SRUyk"}))}u({enabled_monkeys_in_a_barrel:a,...a&&{enabled_artifacts_attachments:!1,preview_feature_uses_artifacts:!0}})}},[t,l,u,n,e])}}},45538:(e,t,n)=>{n.d(t,{BN:()=>P,CB:()=>S,GQ:()=>T,Gz:()=>Q,Kf:()=>b,LQ:()=>C,PL:()=>y,Zd:()=>R,bL:()=>w,bs:()=>L,dx:()=>p,eW:()=>z,fo:()=>j,gM:()=>_,gr:()=>m,kj:()=>M,mu:()=>q,my:()=>E,nl:()=>A,sC:()=>v,sS:()=>Y,tz:()=>x,u7:()=>h,xQ:()=>K});var a=n(19736),i=n(1613),r=n(64328),o=n(35984),l=n(16178),u=n(80688),s=n(68067),d=n(4869),c=n(7620),g=n(10369),f=n(22624);let v=30,p=1e4;var _=function(e){return e.Student="student",e.Meeting="meeting",e.Haystack="haystack",e}({}),m=function(e){return e.Study="study",e.Career="career",e.Research="research",e.Zoom="zoom",e.Teams="teams",e.GoogleMeet="google_meet",e}({});let y=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid;return(0,i.Sk)("/api/organizations/".concat(t,"/projects/count"),{queryKey:[u.Wy,{orgUuid:t}],staleTime:3e5,enabled:!!t,meta:{noToast:e=>e instanceof l.LG&&"permission_error"===e.type}})},S=e=>{let{enabled:t=!0,limit:n,offset:a,starred:o,creatorFilter:l,projectFilter:s,orderBy:d,type:c}=e,{activeOrganization:v}=(0,r.YL)(),p=(0,f.K)(),_=null==v?void 0:v.uuid,m=(0,g.A)(),y=new URLSearchParams;return y.append("include_harmony_projects","true"),void 0!==n&&y.append("limit",n.toString()),void 0!==a&&y.append("offset",a.toString()),void 0!==o&&y.append("starred",o.toString()),void 0!==l&&y.append("creator_filter",l.toString()),void 0!==s&&y.append("filter",s.toString()),void 0!==d&&y.append("order_by",d.toString()),void 0!==c&&y.append("type",c.toString()),(0,i.Sk)("/api/organizations/".concat(_,"/projects?").concat(y.toString()),{queryKey:[u.BP,{orgUuid:_},{limit:n,offset:a,starred:o,creatorFilter:l,projectFilter:s,orderBy:d,type:c}],enabled:!!(t&&v&&p),select:e=>{let t=e.length===n;return Object.assign(e.filter(e=>!e.archived_at).map(e=>"haystack"===e.type?{...e,unformattedName:e.name,name:m.formatMessage({defaultMessage:"Ask {name}",id:"bH47Z4hSE8"},{name:e.name})}:e),{hasMore:t})}})},h=e=>{let{enabled:t=!0,limit:n=v,offset:a=0,starred:o,creatorFilter:l,projectFilter:s,orderBy:d,searchQuery:c}=e,{activeOrganization:g}=(0,r.YL)(),p=(0,f.K)(),_=null==g?void 0:g.uuid,m=new URLSearchParams;return m.append("limit",n.toString()),m.append("offset",a.toString()),void 0!==o&&m.append("starred",o.toString()),void 0!==l&&m.append("creator_filter",l.toString()),void 0!==s&&m.append("filter",s.toString()),void 0!==d&&m.append("order_by",d.toString()),void 0!==c&&m.append("searchQuery",c.toString()),(0,i.Sk)("/api/organizations/".concat(_,"/projects_v2?").concat(m.toString()),{queryKey:[u.Wf,{orgUuid:_},{limit:n,offset:a,starred:o,creatorFilter:l,projectFilter:s,orderBy:d,searchQuery:c}],enabled:!!(t&&g&&p)})},b=()=>{let{activeOrganization:e}=(0,r.YL)(),t=(0,i.mn)();return(0,c.useCallback)(async()=>(await t("/api/organizations/".concat(null==e?void 0:e.uuid,"/projects"))).json(),[null==e?void 0:e.uuid,t])},L=()=>{let e=b(),t=(0,a.uE)();return(0,c.useCallback)(async()=>{let[n,i]=await Promise.all([e(),t({limit:a.dy})]);return((e,t)=>{let n=e.map(e=>({...e,lastConversation:null==t?void 0:t.find(t=>t.project_uuid===e.uuid)})).filter(e=>e.lastConversation).sort((e,t)=>new Date(t.lastConversation.created_at).getTime()-new Date(e.lastConversation.created_at).getTime()),a=null==e?void 0:e.filter(e=>!n.find(t=>t.uuid===e.uuid));return[...n,...a]})(n,i)},[t,e])},j=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=(0,g.A)();return(0,i.Sk)("/api/organizations/".concat(n,"/projects/").concat(e),{queryKey:[u.hc,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e),staleTime:0,meta:{noToast:e=>e instanceof l.LG&&(404===e.statusCode||403===e.statusCode)},select:e=>"haystack"===e.type?{...e,unformattedName:e.name,name:a.formatMessage({defaultMessage:"Ask {name}",id:"bH47Z4hSE8"},{name:e.name})}:e})},k=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,d.useQueryClient)();return{addProject:e=>{n.setQueriesData({queryKey:[u.Wf,{orgUuid:t}]},t=>t?{...t,data:[e,...t.data],pagination:{...t.pagination,total:t.pagination.total+1}}:t),n.setQueriesData({queryKey:[u.BP,{orgUuid:t}]},t=>t?[e,...t]:t),n.setQueriesData({queryKey:[u.Wy,{orgUuid:t}]},e=>e?{count:e.count+1}:e)},removeProject:e=>{n.setQueriesData({queryKey:[u.Wf,{orgUuid:t}]},t=>t?{...t,data:t.data.filter(t=>t.uuid!==e),pagination:{...t.pagination,total:Math.max(0,t.pagination.total-1)}}:t),n.setQueriesData({queryKey:[u.BP,{orgUuid:t}]},t=>t?t.filter(t=>t.uuid!==e):t),n.setQueriesData({queryKey:[u.Wy,{orgUuid:t}]},e=>e?{count:Math.max(0,e.count-1)}:e)}}},w=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=Q(),{addProject:a}=k();return(0,i.L2)(()=>"/api/organizations/".concat(t,"/projects"),"POST",{onSuccess:e=>{a(e),n()}})},Y=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=Q();return(0,i.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"PUT",(e,t)=>t?{...t,...e}:void 0,{onSuccess:()=>{a(e)},queryKey:[u.hc,{orgUuid:n,projectUuid:e}]})},z=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=Q(),{removeProject:o}=k();return(0,i.L2)(()=>"/api/organizations/".concat(n,"/projects/").concat(e),"DELETE",{onSuccess:()=>{o(e),a(e,{remove:!0})}})},C=function(e){let{limit:t=30,offset:n=0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:a}=(0,r.YL)(),o=null==a?void 0:a.uuid,s=new URLSearchParams;return s.append("limit",t.toString()),s.append("offset",n.toString()),(0,i.Sk)("/api/organizations/".concat(o,"/projects/").concat(e,"/conversations_v2?").concat(s.toString()),{queryKey:[u.yF,{orgUuid:o,projectUuid:e,limit:t,offset:n}],enabled:!!a,staleTime:0,meta:{noToast:e=>e instanceof l.LG&&403===e.statusCode}})},P=()=>{var e,t;let n=S({enabled:!0,creatorFilter:"is_creator",limit:p}),a=null==(t=n.data)||null==(e=t.find(e=>e.is_starter_project))?void 0:e.uuid;return{...n,data:a}},Q=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,d.useQueryClient)();return(e,a)=>{let{remove:i=!1}=a||{};if([[u.BP,{orgUuid:t}],[u.Wf,{orgUuid:t}],[u.Wy,{orgUuid:t}]].forEach(e=>void n.invalidateQueries({queryKey:e})),e){let a=i?"removeQueries":"invalidateQueries";[[u.hc,{orgUuid:t,projectUuid:e}],[u.yF,{orgUuid:t,projectUuid:e}],[u.vE,{projectUuid:e}]].forEach(e=>void n[a]({queryKey:e}))}}},T=(e,t)=>{let n=Q();return(0,i.L2)("/api/organizations/".concat(e,"/projects/").concat(t,"/report"),"POST",{enabled:!!t&&!!e,onSuccess:()=>{n(t)}})},K=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=(0,s.fS)("claude_ai_sticky_project_settings");return(0,i.Sk)("/api/organizations/".concat(n,"/projects/").concat(e,"/settings"),{queryKey:[u.vX,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e&&a)})},q=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid,a=(0,s.fS)("claude_ai_sticky_project_settings");return(0,i.Qv)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/settings"),"PUT",(e,t)=>t?{...t,...e}:void 0,{queryKey:[u.vX,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e&&a)})},E=()=>{let{activeOrganization:e}=(0,r.YL)(),t=null==e?void 0:e.uuid,n=(0,d.useQueryClient)();return(0,i.L2)(e=>"/api/organizations/".concat(t,"/projects/").concat(e.projectUuid,"/sync"),"POST",{meta:{noToast:!0},onSuccess:(e,a)=>{"done"===e.kb_resync_status&&a.projectUuid&&n.invalidateQueries({queryKey:[u.qz,{orgUuid:t,projectUuid:a.projectUuid}]})}})},M=()=>(0,s.fS)("claudeai_sync_project"),R=()=>{let{mutateAsync:e}=(0,a.x6)();return{moveToProject:(0,c.useCallback)(async function(t,n){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{batchSize:i=20,batchDelayMs:r=500}=a;if(!t.length||!n)return Promise.resolve({totalMoved:0,totalFailed:0,conversationUuids:[],projectUuid:""});let o=t.length>1,l=0,u=0;if(o){let a=Math.ceil(t.length/i);for(let o=0;o<a;o++){let s=o*i,d=t.slice(s,s+i),c=await e({conversation_uuids:d,project_uuid:n});l+=c.moved.length,u+=c.failed.length,o<a-1&&await new Promise(e=>setTimeout(e,r))}}else{let a=await e({conversation_uuids:t,project_uuid:n});l=a.moved.length,u=a.failed.length}return{totalMoved:l,totalFailed:u,conversationUuids:t,projectUuid:n}},[e])}},A=()=>{let{mutateAsync:e}=(0,a.x6)(),{addSuccess:t,addError:n}=(0,o.Y)(),i=(0,g.A)(),l=(0,d.useQueryClient)(),{activeOrganization:s}=(0,r.YL)(),f=null==s?void 0:s.uuid,[v,p]=(0,c.useState)(new Set),_=(0,c.useCallback)(async function(a){let{showSuccess:r=!0,showError:o=!0,onSuccess:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a.length)return Promise.resolve({moved:[],failed:[]});if(a.some(e=>v.has(e)))return Promise.resolve({moved:[],failed:a});p(e=>{let t=new Set(e);return a.forEach(e=>t.add(e)),t}),a.forEach(e=>{let t=[u.fC,{orgUuid:f},{uuid:e}];l.getQueryData(t)&&l.setQueryData(t,e=>e?{...e,project_uuid:void 0}:e)});try{let n=await e({conversation_uuids:a,project_uuid:null});return n.moved.length>0&&r&&t(i.formatMessage({defaultMessage:"Chat removed from project",id:"UkGfrdMZdS"})),null==s||s(n),await Promise.all(a.map(e=>l.invalidateQueries({queryKey:[u.fC,{orgUuid:f},{uuid:e}]}))),n}catch(e){throw await Promise.all(a.map(e=>l.invalidateQueries({queryKey:[u.fC,{orgUuid:f},{uuid:e}]}))),o&&n(i.formatMessage({defaultMessage:"Failed to remove chat from project",id:"4suoYkIuEm"}),{error:e,messageForLogging:"Failed to remove chat from project"}),e}finally{p(e=>{let t=new Set(e);return a.forEach(e=>t.delete(e)),t})}},[e,t,n,i,v,l,f]),m=(0,c.useCallback)(e=>v.has(e),[v]);return{removeFromProject:_,isRemoving:v.size>0,isRemovingConversation:m}},x=e=>{let{activeOrganization:t}=(0,r.YL)(),n=null==t?void 0:t.uuid;return(0,i.Sk)("/api/organizations/".concat(n,"/projects/").concat(e,"/permissions"),{queryKey:[u._P,{orgUuid:n,projectUuid:e}],enabled:!!(t&&e)})}},84617:(e,t,n)=>{n.d(t,{Y:()=>u});var a=n(54568),i=n(72902),r=n(19664),o=n.n(r);let l="inline underline hover:no-underline",u=e=>{let{className:t,disabled:n,onClick:r,href:u,...s}=e;if(!n){if(u)return(0,a.jsx)(o(),{...s,className:(0,i.A)(l,"cursor-pointer",t),href:u});if(r)return(0,a.jsx)("button",{...s,className:(0,i.A)(l,"cursor-pointer",t),onClick:r})}return(0,a.jsx)("span",{...s,className:(0,i.A)(l,"cursor-default",t),...n?{role:"link","aria-disabled":"true"}:{}})}},94028:(e,t,n)=>{n.d(t,{Bg:()=>s,fR:()=>g,iV:()=>c,ih:()=>d,nI:()=>f});var a=n(1613),i=n(64328),r=n(35984),o=n(80688),l=n(2e3),u=n(4869);let s=()=>{let{account:e,activeOrganization:t}=(0,i.YL)(),n=null==e?void 0:e.uuid,r=null==t?void 0:t.uuid,s=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(r,"/sync/mcp/drive/ingest"),"POST",{onSuccess:()=>{setTimeout(()=>{s.invalidateQueries({queryKey:[o.hx,{orgUuid:r,accountUuid:n,syncSourceType:l.v8.GDRIVE}]})},300)}})},d=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid,{addError:n}=(0,r.Y)(),s=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(t,"/sync/ingestion/gdrive/clean_up"),"POST",{onSuccess:()=>{s.invalidateQueries({queryKey:[o.hx,{orgUuid:t,syncSourceType:l.v8.GDRIVE}]})},onError:e=>{n(e.message,{error:e,errorContext:{tags:{source:"knowledge_cleanup_ingestion"}}})}})},c=e=>{let{activeOrganization:t}=(0,i.YL)(),n=null==t?void 0:t.uuid,r=(0,u.useQueryClient)();return(0,a.L2)("/api/organizations/".concat(n,"/projects/").concat(e,"/kb/resync"),"POST",{enabled:!!e,meta:{noToast:!0},onSuccess:t=>{"done"===t.status&&r.invalidateQueries({queryKey:[o.qz,{orgUuid:n,projectUuid:e}]})}})},g=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],{activeOrganization:n}=(0,i.YL)(),r=null==n?void 0:n.uuid;return(0,a.Sk)("/api/organizations/".concat(r,"/projects/").concat(e,"/kb/stats"),{queryKey:[o.qz,{orgUuid:r,projectUuid:e}],enabled:!!e&&t})},f=()=>{let{activeOrganization:e}=(0,i.YL)(),t=null==e?void 0:e.uuid;return(0,a.L2)("/api/organizations/".concat(t,"/conversation/backfill"),"POST",{})}}}]);